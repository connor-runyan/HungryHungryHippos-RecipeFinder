{% extends 'base.html' %}

{% block head %}
  {% load staticfiles %}
  <link rel="stylesheet" href="{% static 'recipe/slideout.css' %}" />

{% endblock %}

{% block slide_out %}
<!--Code for slide out button here-->
<!--Maybe include a slide-out html page in here-->
<button class="toggle-button">â˜°</button>
{% endblock %}

{% block precontent %}
<div id="menu">
  <h2>Menu</h2>
</div>
{% endblock %}

{% block content %}
<h1>Select Ingredients:</h1>
<form id="form_ingredients">
<table class="table">
  <tr class="thead-light">
    <th>
      U Want?
    </th>
    <th>
      Ingredient
    </th>
    <th>
      Group
    </th>
  </tr>
  {% if ingredients %}
    {% for ingredient in ingredients %}
      <tr>
        <td>
          <input type="checkbox" name="{{ ingredient.name }}" />
        </td>
        <td>
          {{ ingredient.name }}
        </td>
        <td>
          {{ ingredient.group.name }}
        </td>
      </tr>
    {% endfor %}
  {% else %}
    <tr>
      <td></td>
      <td>
        No ingredients :(
      </td>
      <td></td>
    </tr>
  {% endif %}
</table>

<input type="submit" value="Submit" class="btn btn-success" />
</form>

<div class="mt-3">
<h2 id="selected_title"></h2>
<ul id="selected_ingredients"></ul>
</div>
{% endblock %}

{% block footer %}
  {% load staticfiles %}
  <script src="https://cdnjs.cloudflare.com/ajax/libs/slideout/1.0.1/slideout.min.js"></script>
  <script src="{% static 'recipe/slidefunctionality.js' %}"></script>

  <script>
  $(document).ready(function() {
    $('#form_ingredients').on('submit', function(e) {
      e.preventDefault();
      $("#selected_ingredients").empty();

      $('#selected_title').html("You Selected:");
      $("#form_ingredients input:checked").each(function() {
        var name = $(this).attr('name');
        $("#selected_ingredients").append("<li>" + name + "</li>")
      });
    });
  });
  </script>
{% endblock %}
